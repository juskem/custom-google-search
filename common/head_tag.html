<script type="text/x-handlebars" data-template-name="components/google-search">
  <div>
    <form id='google-search-form'>
      <input type="text" name="q" value="{{searchTerm}}">
      <button type="button" class="btn btn-primary" id="search-button">+Podcast</button>
    </form>
  </div>
  </script>
  
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('google-search-form');
      const button = document.getElementById('search-button');
  
      button.addEventListener('click', function(event) {
        // Prevent any default form submission
        event.preventDefault();
  
        const searchTerm = form.querySelector('input[name="q"]').value;
  
        // Ensure the full AWS Lambda URL is used
        const apiUrl = 'https://7cs72f6qgg.execute-api.eu-central-1.amazonaws.com/search?q=' + encodeURIComponent(searchTerm);
  
        // Make the API request using fetch
        fetch(apiUrl, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json'
          }
        })
        .then(response => response.json())
        .then(data => {
          const url = data.url;
  
          // Open the URL in a new tab if it exists
          if (url) {
            window.open(url, '_blank');
          } else {
            alert('No URL found in the response');
          }
        })
        .catch(error => {
          console.error('Error fetching the search result:', error);
        });
      });
    });
  </script>
  