<script type="text/x-handlebars" data-template-name="components/google-search">
  <div>
    <form id='google-search-form'>
      <input type="text" name="q" value="{{searchTerm}}">
      <button class="btn btn-primary" id="search-button">+Podcast</button>
    </form>
  </div>
  </script>
  
  <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
      const form = document.getElementById('google-search-form');
      const button = document.getElementById('search-button');
  
      button.addEventListener('click', function(event) {
        event.preventDefault(); // Prevent the form from submitting the traditional way
  
        const searchTerm = form.querySelector('input[name="q"]').value;
  
        // Make the API request
        fetch('https://7cs72f6qgg.execute-api.eu-central-1.amazonaws.com/search?q=' + encodeURIComponent(searchTerm))
          .then(response => response.json())
          .then(data => {
            // Assuming the returned JSON has a structure where the URL you need is in a field named 'url'
            const url = data.url;
  
            // Open the URL in a new tab
            if (url) {
              window.open(url, '_blank');
            } else {
              alert('No URL found in the response');
            }
          })
          .catch(error => {
            console.error('Error fetching the search result:', error);
          });
      });
    });
  </script>
  